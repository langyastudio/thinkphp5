var isSyn=!1;!function(e,t){"undefined"==typeof Hacfin&&(Hacfin={},e.Hacfin=Hacfin),void 0===Hacfin.Common&&(Hacfin.Common={}),Hacfin.Common={PadPre:function(e,t){for(var o=e.toString().length;o<t;)e="0"+e,o++;return e},Unix2Time:function(e,t){var o=new Date(1e3*parseInt(e));return e||(o=new Date),0==t?o.getFullYear()+"-"+Hacfin.Common.PadPre(o.getMonth()+1,2)+"-"+Hacfin.Common.PadPre(o.getDate(),2)+" "+Hacfin.Common.PadPre(o.getHours(),2)+":"+Hacfin.Common.PadPre(o.getMinutes(),2)+":"+Hacfin.Common.PadPre(o.getSeconds(),2):1==t?o.getFullYear()+"-"+Hacfin.Common.PadPre(o.getMonth()+1,2)+"-"+Hacfin.Common.PadPre(o.getDate(),2)+" "+Hacfin.Common.PadPre(o.getHours(),2)+":"+Hacfin.Common.PadPre(o.getMinutes(),2):2==t?o.getFullYear()+"-"+Hacfin.Common.PadPre(o.getMonth()+1,2)+"-"+Hacfin.Common.PadPre(o.getDate(),2):3==t?Hacfin.Common.PadPre(o.getHours(),2)+":"+Hacfin.Common.PadPre(o.getMinutes(),2):o.Format("yyyy-MM-dd HH:mm")},Time2Unix:function(e){if("string"!=typeof e)return void console.log("Time2Unix()收到的参数不是字符型");var t=e.replace(/-/g,"/");return new Date(t).getTime().toString().substr(0,10)},RelativeTime:function(e){if(void 0===e)return"0秒前";if(!$.isNumeric(e))return"0秒前";if(parseInt(e)<0)return"0秒前";return e>=31536e3?Math.round(e/31536e3)+"年前":e>=86400?Math.round(e/86400)+"天前":e>=3600?Math.round(e/3600)+"小时前":e>=60?Math.round(e/60)+"分钟前":e+"秒前"},Now:function(){return Math.round((new Date).getTime()/1e3)},Cache_GetSiteInfo:function(e,t){var o=this.GetSessionStorage(e);o?t(o):Hacfin.Utility.GetDataFromAPI({url:"SiteInfo",type:"Get",callback:function(o){Hacfin.Common.SetSessionStorage("siteName",o.websitename+"-"),Hacfin.Common.SetSessionStorage("webCfg",JSON.stringify(o)),t(Hacfin.Common.GetSessionStorage(e))}})},GetSessionStorage:function(e){return sessionStorage.getItem(e)},SetSessionStorage:function(e,t){sessionStorage.setItem(e,t)},DeleteSessionStorage:function(e){sessionStorage.removeItem(e)},GetLocalStorage:function(e){return localStorage.getItem(e)},SetLocalStorage:function(e,t){localStorage.setItem(e,t)},DeleteLocalStorage:function(e){localStorage.removeItem(e)},GetCookie:function(e){var t,o=new RegExp("(^| )"+e+"=([^;]*)(;|$)");return(t=document.cookie.match(o))?unescape(t[2]):""},Setcookie:function(e,t,o){if(o){var n=new Date;n.setTime(n.getTime()+60*o*1e3);var i="; expires="+n.toGMTString()}else i="";document.cookie=e+"="+t+i+"; path=/"},DeleteCookie:function(e){var t=new Date;t.setTime(t.getTime()-16e3);var o=Hacfin.Common.GetCookie(e);null!=o&&(document.cookie=e+"="+o+";expires="+t.toGMTString()+";path=/")},SetData2Form:function(e,t){var o,n,i,a;for(x in t)o=x,n=t[x],$("#"+e).find("[name='"+o+"'],[name='"+o+"[]']").each(function(){i=$(this)[0].tagName,a=$(this).attr("type"),"INPUT"==i?"radio"==a||"checkbox"==a?$(this).checked($(this).val()==n):$(this).val(n):"SELECT"==i||"TEXTAREA"==i?$(this).val(n):$(this).text(n)})},ClearForm:function(e){$("#"+e).find("[name]").each(function(){var e,t;$(this).attr("name"),e=this.tagName,t=$(this).attr("type"),"INPUT"==e?"radio"==t||"checkbox"==t?$(this).checked(!1):$(this).val(""):"SELECT"!=e&&"TEXTAREA"!=e||$(this).val("")})},GetDataFromForm:function(e){var t={};return $("#"+e).find("[name]").each(function(){var e,o,n;e=$(this).attr("name"),o=this.tagName,n=$(this).attr("type"),"INPUT"==o?"radio"==n||"checkbox"==n?$(this).is(":checked")&&(t[e]=$(this).val()):t[e]=$(this).val():"SELECT"!=o&&"TEXTAREA"!=o||(t[e]=$(this).val())}),t},SerializeForm2Json:function(e){var t={};return $(e.serializeArray()).each(function(){t[this.name]=this.value}),t},Set_Focus:function(t){var o=e.getSelection(),n=document.createRange();n.selectNodeContents(t[0]),n.collapse(!1),o.removeAllRanges(),o.addRange(n)},FileMd5:function(e,t){function o(){if(3==r){var t=a,o=e.size-a,s=e.size;0==currentChunk?fileReader.readAsBinaryString(i.call(blob,0,t)):1==currentChunk?fileReader.readAsBinaryString(i.call(blob,o,s)):2==currentChunk&&(spark.appendBinary(e.size.toString()),n())}else fileReader.readAsBinaryString(i.call(blob,0,e.size))}function n(){var e=spark.end();void 0!==t&&t(e)}if("undefined"!=typeof File){var i=File.prototype.slice||File.prototype.mozSlice||File.prototype.webkitSlice,a=1048576,r=0;currentChunk=0,blob=e instanceof Blob?e:e.source.getSource(),spark=new SparkMD5,fileReader=new FileReader,fileReader.onload=function(e){e&&e.target.result?spark.appendBinary(e.target.result):fileReader.content&&spark.appendBinary(fileReader.content),currentChunk++,currentChunk<r?o():n()},fileReader.onerror=function(){},r=e.size>2*a?3:1,o()}},FileSize:function(e){if(void 0===e)return"-";if(!$.isNumeric(e))return"-";var t=1048576,o=1024*t;return e>=1024*o?parseFloat((e/(1024*o)).toFixed(2))+"T":e>=o?parseFloat((e/o).toFixed(2))+"G":e>=t?parseFloat((e/t).toFixed(2))+"M":e>=1024?parseFloat((e/1024).toFixed(2))+"KB":e+"B"},ValidFileName:function(e){var t={success:!0,msg:""};/[\\\/\:\*\?"<>\|]/i.test(e)&&(t.success=!1,t.msg="文件名不能包含以下字符：<,>,|,*,?,,/!");var o=this.GetCharLength(e);return 0==o?(t.success=!1,t.msg="文件(夹)名称不能为空，请输入文件名称"):o>255&&(t.success=!1,t.msg="文件(夹)名称长度不能超过255字节"),t},RootPath:function(){var t=e.document.location.href,o=e.document.location.pathname,n=t.indexOf(o);return t.substring(0,n)},LocationPre:function(){var t=location.protocol+"//"+location.host+"/access/register",o=location.protocol+"//"+location.host+"/access/forget?step=3";bowser.msie?e.history.length>0?document.referrer==t||document.referrer==o?location.href="/index/index":e.history.go(-1):parent.location.href="/":e.history.length>2?document.referrer==t||document.referrer==o?location.href="/index/index":e.history.go(-1):parent.location.href="/"},IsIE8:function(){return"Microsoft Internet Explorer"==navigator.appName&&"MSIE8.0"==navigator.appVersion.split(";")[1].replace(/[ ]/g,"")},IsIE9:function(){return"Microsoft Internet Explorer"==navigator.appName&&"MSIE9.0"==navigator.appVersion.split(";")[1].replace(/[ ]/g,"")},IsPC:function(){for(var e=navigator.userAgent.toLowerCase(),t=["android","symbianos","windows phone","ipad","ipod","iphone","android","phone","mobile","wap","netfront","java","opera mobi","opera mini","ucweb","windows ce","symbian","series","webos","sony","blackberry","dopod","nokia","samsung","palmsource","xda","pieplus","meizu","midp","cldc","motorola","foma","docomo","up.browser","up.link","blazer","helio","hosin","huawei","novarra","coolpad","webos","techfaith","palmsource","alcatel","amoi","ktouch","nexian","ericsson","philips","sagem","wellcom","bunjalloo","maui","smartphone","iemobile","spice","bird","zte-","longcos","pantech","gionee","portalmmm","jig browser","hiptop","benq","haier","^lct","320x320","240x320","176x220","w3c ","acs-","alav","alca","amoi","audi","avan","benq","bird","blac","blaz","brew","cell","cldc","cmd-","dang","doco","eric","hipt","inno","ipaq","java","jigs","kddi","keji","leno","lg-c","lg-d","lg-g","lge-","maui","maxo","midp","mits","mmef","mobi","mot-","moto","mwbp","nec-","newt","noki","oper","palm","pana","pant","phil","play","port","prox","qwap","sage","sams","sany","sch-","sec-","send","seri","sgh-","shar","sie-","siem","smal","smar","sony","sph-","symb","t-mo","teli","tim-","tsm-","upg1","upsi","vk-v","voda","wap-","wapa","wapi","wapp","wapr","webc","winw","winw","xda","xda-","Googlebot-Mobile"],o=!0,n=0;n<t.length;n++)if(e.indexOf(t[n])>0){o=!1;break}return o},TouchEvent:function(t){var o,n,i,a;t.on("touchstart",function(e){if(1==e.originalEvent.targetTouches.length){var t=e.originalEvent.targetTouches[0];o=t.pageX,n=t.pageY}}),t.on("touchmove",function(e){if(1==e.originalEvent.targetTouches.length){var t=e.originalEvent.targetTouches[0];move_x=t.pageX,move_y=t.pageY}}),t.on("touchend",function(t){if(1==t.originalEvent.changedTouches.length){var n=t.originalEvent.changedTouches[0];i=n.pageX,a=n.pageY}o-i>100||o-i<-100&&($("#catalogC").stop().animate({left:$(e).width()},800),$(".m-filter").find("i").attr("class","fa fa-caret-up"),$("#catalogwrap").hide())})},FilterClick:function(){$(".m-filter").on("click",function(){$(this).find("i").hasClass("fa-caret-up")?($(this).find("i").attr("class","fa fa-caret-down"),$("#catalogC").show()):($(this).find("i").attr("class","fa fa-caret-up"),$("#catalogC").hide())})},EventTarget:function(t){t=t||e.event;return t.srcElement?t.srcElement:t.target},ClipCopy:function(t,o,n){if(!Hacfin.Common.IsIE8()){var i=n?"#"+o:"."+o,a=new Clipboard(i,{text:function(e){return t()}});return a.on("success",function(e){}),a.on("error",function(e){}),a}e.clipboardData.setData("Text",t())},ClipDestory:function(e){e&&e.destroy()},EventClipCopy:function(e){var t=e.data,o=t.copyfun,n=t.id?t.id:"btn";return Hacfin.Common.ClipCopy(o,n,!0)},EventBindMaxLen:function(e,t,o){Hacfin.Common.IsIE8()&&e.on("paste",function(){setTimeout(function(){e.find("img").remove()},0)});var n=!1,i="keyup";Hacfin.Common.IsPC()||(i="input"),e.on(i,function(){n||Hacfin.Common.MaxLength(e,t,o)}).on("compositionstart",function(){n=!0}).on("compositionend",function(){n=!1,bowser.chrome&&Hacfin.Common.MaxLength(e,t,o)}),e.on("paste",function(){setTimeout(function(){Hacfin.Common.MaxLength(e,t,o)},0)})},MaxLength:function(e,t,o){var n,i,a=0;if(o){n=e.html();a=e.find("img").length}else n=e.val();if((i=n.length+a)>t){for(var r,s,c=i;c>t;c--)r=e.html(),s=r.replace(/^(.*[n])*.*(.|n)$/g,"$2"),">"==s?e.children(":last-child").remove():(r=r.substring(0,r.length-1),e.html(r),this.IsIE8()||this.Set_Focus(e));o?0==a&&(e.html(n.substring(0,t)),this.IsIE8()||this.Set_Focus(e)):e.val(n.substring(0,t)),i=t,Hacfin.Dialog.ShowError("最多输入"+t+"个字符"),this.IsIE8()&&e.blur()}if(i/t>.5){var l=2;Hacfin.Common.IsPC()||(l=3),layer.tips(i+"/"+t,e,{tips:[l,"#0A8ACB"],tipsMore:!0,time:1e3})}},LoadMore:function(e,t,o){var n,i,a=e.height();e.scroll(function(){n=$(this)[0].scrollHeight,i=$(this)[0].scrollTop,o===!0?i<=0&&"function"==typeof t&&t():i+a>=n&&"function"==typeof t&&t()})},ImgResize:function(e,t){e.imgLiquid(t)},WebTitle:function(e){Hacfin.Common.Cache_GetSiteInfo("siteName",function(t){document.title=t+"-"+e})},GetCharLength:function(e){for(var t=0,o=0;o<e.length;o++)charCode=e.charCodeAt(o),charCode>=0&&charCode<=128?t+=1:t+=2;return t},Tpl:function(e,t,o){Hacfin.Common.IsIE8()&&"TBODY"==$("#"+e)[0].tagName?$("#"+e).html(template(t,o)):document.getElementById(e).innerHTML=template(t,o)},Tpl_Compile:function(e,t,o){var n=template.compile(t);document.getElementById(e).innerHTML=n(o)},WebUploader:function(e){function o(){if(!WebUploader.Uploader.support()){return Hacfin.Dialog.ShowError("上传控件不支持您的浏览器！请尝试升级flash版本或者使用Chrome引擎的浏览器。<a target='_blank' href='http://ie.sogou.com'>下载页面</a>"),null}var o={auto:!0,innerOptions:{},server:t,deleteServer:t,fileNumLimit:t,fileSizeLimit:t,fileSingleSizeLimit:t,PostbackHold:!1,pick:{label:"上传",id:t,multiple:!1}};e.accepttype!=t&&(1==e.accepttype?e.accept={title:"Excels",extensions:"xls"}:2==e.accepttype?e.accept={title:"Images",extensions:"gif,jpg,jpeg,bmp,png,ico",mimeTypes:"image/jpeg,image/png,image/gif,image/bmp,image/x-icon"}:3==e.accepttype&&(e.accept={title:"Images",extensions:"gif,jpg,jpeg,png",mimeTypes:"image/jpeg,image/png,image/gif"}));var n=$.extend(o,e),i=$.extend({swf:"/public/assets/webuploader/Uploader.swf",server:n.server,deleteServer:n.deleteServer,PostbackHold:n.PostbackHold,pick:n.pick,auto:n.auto,accept:n.accept,fileNumLimit:n.fileNumLimit,fileSizeLimit:n.fileSizeLimit,fileSingleSizeLimit:n.fileSingleSizeLimit,resize:!1,disableGlobalDnd:!0,compress:!1,duplicate:!0},n.innerOptions),a=WebUploader.create(i);return n.deletedefaultcss&&$(n.pick.id+" div:first").removeClass("webuploader-pick"),e.fileQueued&&a.on("fileQueued",e.fileQueued),e.fileDequeued&&a.on("fileDequeued",e.fileDequeued),e.startUpload&&a.on("startUpload",e.startUpload),e.uploadProgress&&a.on("uploadProgress",e.uploadProgress),e.uploadSuccess&&a.on("uploadSuccess",e.uploadSuccess),e.uploadComplete&&a.on("uploadComplete",e.uploadComplete),e.uploadStart&&a.on("uploadStart",e.uploadStart),e.filesQueued&&a.on("filesQueued",e.filesQueued),e.uploadFinished&&a.on("uploadFinished",e.uploadFinished),e.uploadBeforeSend&&a.on("uploadBeforeSend",e.uploadBeforeSend),e.uploadError&&a.on("uploadError",e.uploadError),e.uploadAccept&&a.on("uploadAccept",e.uploadAccept),a.on("error",function(e,t){var o=e;switch(o){case"Q_EXCEED_SIZE_LIMIT":var n=parseFloat((a.option("fileSizeLimit")/1024/1024).toFixed(2)),i=" M";n>=1024&&(n=parseFloat((n/1024).toFixed(2)),i=" G"),o="所有文件的总大小不能超过 "+n+i;break;case"Q_TYPE_DENIED":o=t.size<=0&&!this.options.accept?"文件不能为空":"请上传指定的文件类型";break;case"F_DUPLICATE":o="此文件已上传,编辑完文件信息,保存即可";break;case"Q_EXCEED_NUM_LIMIT":o="每次最多传"+a.option("fileNumLimit")+"个文件，超出的文件会被忽略";break;case"F_EXCEED_SIZE":var n=parseFloat((a.option("fileSingleSizeLimit")/1024/1024).toFixed(2)),i=" M";n>=1024&&(n=parseFloat((n/1024).toFixed(2)),i=" G"),o="文件大小不能超过 "+n+i}Hacfin.Dialog.ShowError(o)}),a}if(!e||!e.server)return null;if("undefined"!=typeof WebUploader)return o();$("<link>").attr({rel:"stylesheet",type:"text/css",href:"/public/assets/webuploader/webuploader.css"}).appendTo("head"),$.getScript("/public/assets/webuploader/webuploader.js").done(function(){rtn=o()}).fail(function(){Hacfin.Dialog.ShowError("请检查webuploader的路径是否正确!")})}}}(window),"undefined"==typeof FileReader||FileReader.prototype.readAsBinaryString||(FileReader.prototype.readAsBinaryString=function(e){var t="",o=this,n=new FileReader;n.onload=function(e){for(var n=new Uint8Array(e.target.result),i=n.byteLength,a=0;a<i;a++)t+=String.fromCharCode(n[a]);o.content=t,$(o).trigger("onload")},n.readAsArrayBuffer(e)}),Date.prototype.Format=function(e){var t={"M+":this.getMonth()+1,"d+":this.getDate(),"h+":this.getHours()%12==0?12:this.getHours()%12,"H+":this.getHours(),"m+":this.getMinutes(),"s+":this.getSeconds(),"q+":Math.floor((this.getMonth()+3)/3),S:this.getMilliseconds()},o={0:"/u65e5",1:"/u4e00",2:"/u4e8c",3:"/u4e09",4:"/u56db",5:"/u4e94",6:"/u516d"};/(y+)/.test(e)&&(e=e.replace(RegExp.$1,(this.getFullYear()+"").substr(4-RegExp.$1.length))),/(E+)/.test(e)&&(e=e.replace(RegExp.$1,(RegExp.$1.length>1?RegExp.$1.length>2?"/u661f/u671f":"/u5468":"")+o[this.getDay()+""]));for(var n in t)new RegExp("("+n+")").test(e)&&(e=e.replace(RegExp.$1,1==RegExp.$1.length?t[n]:("00"+t[n]).substr((""+t[n]).length)));return e},jQuery.validatorEx=function(){jQuery.validator.addMethod("checkName",function(e,t){var o=/^([_a-zA-Z0-9]{4,20})$/,n=/^([0-9]+)$/;return this.optional(t)||!n.test(e)&&o.test(e)},"请输入由数字、字母、下划线组成的，非纯数字的，长度为4-20的字符串"),jQuery.validator.addMethod("checkEmail",function(e,t){var o=/^[_a-zA-Z0-9\-]+(\.[_a-zA-Z0-9\-]*)*@[a-zA-Z0-9\-]+([\.][a-zA-Z\-]+)+$/;return this.optional(t)||o.test(e)},"请输入有效的邮箱地址"),jQuery.validator.addMethod("checkPassword",function(e,t){var o=/((?=.*\d)(?=.*\D)|(?=.*[a-zA-Z])(?=.*[^a-zA-Z]))^[^\s]{6,20}$/;return this.optional(t)||o.test(e)},"请输入由字母、数字、标点符号组成的字符串，但不能有空格"),jQuery.validator.addMethod("condition",function(e,t,o){return o},"不符合条件"),jQuery.validator.addMethod("checkMobile",function(e,t){var o=e.length,n=/^1[34578]{1}[0-9]{9}$/;return this.optional(t)||11==o&&n.test(e)},"请正确填写手机号码"),jQuery.validator.addMethod("checkStreamname",function(e,t){var o=/^([_a-zA-Z0-9-]+)$/;return this.optional(t)||o.test(e)},"请输入由数字、字母、下划线及破折号组成的")},jQuery.fn.checked=function(e){e?(this.attr("checked","checked"),this.prop("checked",!0)):this.removeAttr("checked")};