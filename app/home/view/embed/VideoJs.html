<!DOCTYPE html>
<html lang="en">
<head>
	<title>Video.js | HTML5 Video Player</title>
	<link href="/public/assets/videojs/video-js.css" rel="stylesheet" type="text/css">

	<!--[if lt IE 9]>
	<script src="/public/assets/respond.min.js"></script>
	<script src="/public/assets/html5shiv.min.js"></script>
	<script src="/public/assets/videojs/ie8/videojs-ie8.min.js"></script>
	<![endif]-->

	<script src="/public/assets/jquery.min.js"></script>
	<script src="/public/assets/videojs/video.min.js"></script>

	<!--中文包-->
	<script src="/public/assets/videojs/lang/zh-CN.js"></script>
	<!--支持hls-->
	<script src="/public/assets/videojs/hls/videojs-contrib-hls.min.js"></script>
	<!--hotkey-->
	<script src="/public/assets/videojs/hotkeys/videojs.hotkeys.min.js"></script>
	<!--resolution	-->
	<link href="/public/assets/videojs/resolution/videojs-resolution-switcher.css" rel="stylesheet" type="text/css">
	<script src="/public/assets/videojs/resolution/videojs-resolution-switcher.js"></script>

	<script>videojs.options.flash.swf = "/public/assets/videojs/video-js.swf";</script>
	<style>
		.playdiv {
			width    : 800px;
			height   : 600px;

			position : absolute;
			left     : 0;
			right    : 0;
			top      : 0;
			bottom   : 0;
			margin   : auto;
		}
	</style>

</head>

<body>
<div class="playdiv">
	<video id="example_video_1" class="video-js vjs-default-skin vjs-big-play-centered" data-setup="{}">
	</video>
</div>

<script>
	var player = null;

	$(function () {
		//取消右键事件
		$("#example_video_1").bind("contextmenu", function () {
			return false;
		});

		player = videojs('#example_video_1', {
			techOrder             : ["flash", "html5"],
			autoplay              : true,
			preload               : "auto",
			loop				  : false,
			poster                : '',
			width                 : 800,
			height                : 600,
			language              : 'zh-CN',
			nativeControlsForTouch: false,
			sources: [
					{type: 'video/mp4', src: '/public/res/blackboard.mp4', label: '标清'},
					{type: 'video/mp4', src: '/public/res/ppt.mp4', label: '高清'}
				],
			controls              : true,
			controlBar: {
				captionsButton        : false,
				chaptersButton        : false,
				subtitlesButton       : false,
				playbackRateMenuButton: true,
				LiveDisplay           : true,
				remainingTimeDisplay  : true,
				progressControl       : true,
				fullscreenToggle	  : true,

				//竖着的音量条
				volumeMenuButton: {
					inline  : false,
					vertical: true
				}
			},
			plugins               : {
				//分辨率选择插件
				videoJsResolutionSwitcher: {
					dynamicLabel: true
				},
				//热键插件
				hotkeys: {
					volumeStep               : 0.1,
					seekStep                 : 5,
					enableModifiersForNumbers: false
				}
			}
		}).ready(function () {
//			if ((browser.TOUCH_ENABLED || browser.IS_IPHONE || browser.IS_NATIVE_ANDROID) &&
//				 options.nativeControlsForTouch === true) {
//				this.setControls(true);
//			}

//			var path = '/public/res/blackboard.mp4';
//			var type = 'video/mp4';
//			var path = 'rtmp://live.boolongo.com:1935/live/01_001_109';
//			var type = 'rtmp/flv';
//			var path = "http://live.hkstv.hk.lxdns.com/live/hks/playlist.m3u8";
//			var type="application/x-mpegURL";

			//绑定视频播放中事件
//			if(type == 'video/mp4'){
//				var lastTime = localStorage.getItem(path + ".currentTime") || 0;
//				this.currentTime(lastTime);
//
//				this.on("timeupdate", function (data) {
//					lastTime = this.currentTime();
//					localStorage.setItem(path + ".currentTime", lastTime);
//				});
//			}

//			this.src({type: type, src: path});
//			this.reset();
//			this.load();

			//Add dynamically sources
//			this.updateSrc([
//				{
//					src: '/public/res/ppt.mp4',
//					type: 'video/mp4',
//					label: '标清'
//				},
//				{
//					src: '/public/res/blackboard.mp4',
//					type: 'video/mp4',
//					label: '高清'
//				}
//			]);
			this.on('resolutionchange', function(){
				console.info('Source changed to %s', this.src())
			});
			//修正label
			var datasrc     = this.src();
			var datasources = this.currentResolution();
			datasources.sources.forEach(function (source) {
				if(datasrc.indexOf(source.src) >=0 )
				{
					player.currentResolution(source.label)
				}
			});

			this.play();
		});

	});
</script>
</body>

</html>